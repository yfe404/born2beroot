Ok I have my base image with disk partitionning as expected (bonus section)

Next step: setting up the ssh service running on port 4242 
note: root login must not be allowed. 

That's trivial, we just need to install `openssh-server`, edit the file `/etc/ssh/sshd_config`, 
specifically these two lines:

```
...
Port 4242
...
PermitRootLogin no
...
```

And enable the service: 
`systemctl enable --now sshd`

Easy. 

EDIT: of course we need to edit /etc/apt/sources.list first as the urls points to the cdrom (that we don't have). And run a `apt update`.

We can test that using a port forwarding in VBox (if NAT) or directlty ssh-ing the VM ip (if bridged)

-----

Next, set up of UFW, letting only traffic to and from 4242 (ssh)
Source: https://wiki.debian.org/Uncomplicated%20Firewall%20%28ufw%29

However, simply installing the firewall will not turn it on automatically, nor it will have any rule set by default.  

So we need to add our rules and enable / start the service. 

```
# ufw enable 
```

Since we use a custom port for ssh, we cannot just `ufw allow ssh`, we need to `ufw allow 4242/tcp`

------


Next step changing the hostname
Source: https://wiki.debian.org/Hostname#Core_networking


Since we use systemd this is very easy: `hostnamectl set-hostname HOSTNAME`


-------

Now let setup the password policy
Source: https://www.debian.org/doc/manuals/securing-debian-manual/ch04s11.en.html
https://web.archive.org/web/20190313211808/https://www.deer-run.com/~hal/sysadmin/pam_cracklib.html

https://www.server-world.info/en/note?os=Debian_10&p=password

We need to install the password quality checking library
`apt install libpam-pwquality`

and then edit these 2 files:
- /etc/login.defs 
- /etc/security/pwquality.conf 

according to the subject.


------


Next installation and configuration of sudo

`apt install sudo`


we can also create and add our use to sudo
`adduser foo -G sudo`

or add an existing user to sudo 
`adduser foo sudo`




Source: `man sudoers`




#### MONIT SCRIPT



cpu usage: https://askubuntu.com/questions/274349/getting-cpu-usage-realtime
